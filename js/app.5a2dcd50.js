(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],u=0,d=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);f&&f(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,s=1;s<i.length;s++){var l=i[s];0!==a[l]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},a={app:0},r=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var f=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"3a4f":function(t,e,i){},"5a8b":function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",attrs:{id:"app"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("Particles",{attrs:{id:"tsparticles",options:t.snowConfig}}),i("FortuneWheel",{staticStyle:{width:"500px","max-width":"100%"},attrs:{verify:t.canvasVerify,canvas:t.canvasOptions,prizes:t.prizesCanvas},on:{rotateStart:t.onCanvasRotateStart,rotateEnd:t.onRotateEnd}})],1)])])},r=[],o=(i("4de4"),i("d3b7"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fw-container"},[i("div",{staticClass:"fw-wheel",style:t.rotateStyle,on:{transitionend:t.onRotateEnd,webkitTransitionend:t.onRotateEnd}},["canvas"===t.type?i("canvas",{ref:"wheel",attrs:{width:2*t.canvasConfig.radius,height:2*t.canvasConfig.radius}}):t._t("wheel")],2),i("div",{staticClass:"fw-btn"},["canvas"===t.type?i("div",{staticClass:"fw-btn__btn",style:{width:t.canvasConfig.btnWidth+"px",height:t.canvasConfig.btnWidth+"px"},on:{click:t.handleClick}},[t._v(" "+t._s(t.canvasConfig.btnText)+" ")]):i("div",{staticClass:"fw-btn__image",on:{click:t.handleClick}},[t._t("button")],2)])])}),s=[],l=i("2909"),c=(i("498a"),i("ac1f"),i("5319"),i("a9e3"),i("159b"),i("cb29"),i("4e82"),i("1276"),i("d9e2"),i("b0c0"),i("c740"),i("6bd8")),f=i.n(c),u=i("0f40"),d=i.n(u),h={radius:250,textRadius:190,textLength:6,textDirection:"horizontal",lineHeight:20,borderWidth:0,borderColor:"transparent",btnText:"GO",btnWidth:140,fontSize:20};function p(t,e){var i=[];while(""!==t){var n=t.substr(0,e);if(""!==t.charAt(e)&&" "!==t.charAt(e)){var a=n.lastIndexOf(" ");-1!==a&&(n=n.substr(0,a))}t=t.replace(n,"").trim(),i.push(n)}return i}var b=n["default"].extend({name:"FortuneWheel",props:{type:{type:String,default:"canvas"},useWeight:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},verify:{type:Boolean,default:!1},canvas:{type:Object,default:function(){return h}},duration:{type:Number,default:6e3},timingFun:{type:String,default:"cubic-bezier(0.36, 0.95, 0.64, 1)"},angleBase:{type:Number,default:10},prizeId:{type:Number,default:0},prizes:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{isRotating:!1,rotateEndDeg:0,prizeRes:{}}},computed:{canvasConfig:function(){return Object.assign(h,this.canvas)},probabilityTotal:function(){return this.useWeight?100:f()(this.prizes,(function(t){return t.probability||0}))},prizesIdArr:function(){var t=this,e=[];return this.prizes.forEach((function(i){var n=t.useWeight?i.weight||0:(i.probability||0)*t.decimalSpaces,a=new Array(n).fill(i.id);e.push.apply(e,Object(l["a"])(a))})),e},decimalSpaces:function(){if(this.useWeight)return 0;var t=Object(l["a"])(this.prizes).sort((function(t,e){var i=String(t.probability).split(".")[1],n=String(e.probability).split(".")[1],a=i?i.length:0,r=n?n.length:0;return r-a})),e=String(t[0].probability).split(".")[1],i=e?e.length:0;return[1,10,100,1e3,1e4][i>4?4:i]},rotateStyle:function(){return{"-webkit-transform":"rotateZ(".concat(this.rotateEndDeg,"deg)"),transform:"rotateZ(".concat(this.rotateEndDeg,"deg)"),"-webkit-transition-duration":"".concat(this.rotateDuration,"s"),"transition-duration":"".concat(this.rotateDuration,"s"),"-webkit-transition-timing-function:":this.timingFun,"transition-timing-function":this.timingFun}},rotateDuration:function(){return this.isRotating?this.duration/1e3:0},rotateBase:function(){var t=360*this.angleBase;return this.angleBase<0&&(t-=360),t},canRotate:function(){return!this.disabled&&!this.isRotating&&100===this.probabilityTotal}},watch:{prizeId:function(t){if(this.isRotating){var e=this.getTargetDeg(t);this.angleBase<0&&(e-=360);var i=this.rotateEndDeg,n=360*this.angleBase+e,a=360*Math.floor((n-i)/360);this.angleBase>=0?n+=Math.abs(a):n+=-360-a,this.rotateEndDeg=n}}},created:function(){this.checkProbability()},mounted:function(){"canvas"===this.type&&this.drawCanvas()},methods:{checkProbability:function(){if(100!==this.probabilityTotal)throw new Error("Prizes Is Error: Sum of probabilities is not 100!");return!0},drawCanvas:function(){var t=this,e=this.$refs.wheel;if(e.getContext){var i=this.canvasConfig,n=i.radius,a=i.textRadius,r=i.borderWidth,o=i.borderColor,s=i.fontSize,l=Math.PI/(this.prizes.length/2),c=e.getContext("2d");c.clearRect(0,0,2*n,2*n),c.strokeStyle=o,c.lineWidth=2*r,c.font="".concat(s,"px Arial"),this.prizes.forEach((function(e,i){var o=i*l-Math.PI/2;c.fillStyle=e.bgColor,c.beginPath(),c.arc(n,n,n-r,o,o+l,!1),c.stroke(),c.arc(n,n,0,o+l,o,!0),c.fill(),c.save(),c.fillStyle=e.color,c.translate(n+Math.cos(o+l/2)*a,n+Math.sin(o+l/2)*a),t.drawPrizeText(c,o,l,e.name),c.restore()}))}},drawPrizeText:function(t,e,i,n){var a=this.canvasConfig,r=a.lineHeight,o=a.textLength,s=a.textDirection,l=p(n,o);null!==l&&("vertical"===s?t.rotate(e+i/2+Math.PI):t.rotate(e+i/2+Math.PI/2),l.forEach((function(e,i){var n=-t.measureText(e).width/2,a=(i+1)*r;"vertical"===s&&(n=0,a=(i+1)*r-l.length*r/2),t.fillText(e,n,a)})))},handleClick:function(){this.canRotate&&(this.verify?this.$emit("rotateStart",this.onRotateStart):(this.$emit("rotateStart"),this.onRotateStart()))},onRotateStart:function(){this.isRotating=!0;var t=this.prizeId||this.getRandomPrize();this.rotateEndDeg=this.rotateBase+this.getTargetDeg(t)},onRotateEnd:function(){this.isRotating=!1,this.rotateEndDeg%=360,this.$emit("rotateEnd",this.prizeRes)},getRandomPrize:function(){var t=this.prizesIdArr.length,e=this.prizesIdArr[d()(0,t-1)];return e},getTargetDeg:function(t){var e=360/this.prizes.length,i=this.prizes.findIndex((function(e){return e.id===t}));return this.prizeRes=this.prizes[i],360-(e*i+e/2)}}}),g=b,v=(i("d4d5"),i("2877")),y=Object(v["a"])(g,o,s,!1,null,"41d1671c",null),m=y.exports,w=n["default"].extend({name:"App",components:{FortuneWheel:m},data:function(){return{prizeId:0,dialog:!1,canvasVerify:!1,snowConfig:{background:{color:"#ffd966"},particles:{color:{value:"random"},move:{direction:"bottom",enable:!0,outModes:"out",speed:2},number:{density:{enable:!0,area:800},value:400},opacity:{value:.7},shape:{type:["circle"]},size:{value:10},wobble:{enable:!0,distance:10,speed:10},zIndex:{value:{min:0,max:100}}}},canvasOptions:{btnWidth:140,borderColor:"#584b43",borderWidth:6,lineHeight:30},prizesCanvas:[{id:1,name:"10.000 VNĐ",value:"10.000 VNĐ",bgColor:"#45ace9",color:"#ffffff",probability:10},{id:2,name:"5.000 VNĐ",value:"5.000 VNĐ",bgColor:"#dd3832",color:"#ffffff",probability:15},{id:3,name:"20.000 VNĐ",value:"20.000 VNĐ",bgColor:"#fef151",color:"#ffffff",probability:10},{id:4,name:"50.000 VNĐ",value:"50.000 VNĐ",bgColor:"green",color:"#ffffff",probability:5},{id:5,name:"100.000 VNĐ",value:"100.000 VNĐ",bgColor:"#448f99",color:"#ffffff",probability:5},{id:6,name:"200.000 VNĐ",value:"200.000 VNĐ",bgColor:"#783f04",color:"#ffffff",probability:2},{id:7,name:"500.000 VNĐ",value:"500.000 VNĐ",bgColor:"#d1a72a",color:"#ffffff",probability:3},{id:8,name:"Trúng cái nách",value:"Trúng cái nách",bgColor:"#a89689",color:"#ffffff",probability:30},{id:9,name:"Quay thêm 1 lượt",value:"Quay thêm 1 lượt",bgColor:"#000000",color:"#ffffff",probability:20}],prizesImage:[{id:1,value:"Blue's value",weight:1},{id:2,value:"Red's value",weight:0},{id:3,value:"Yellow's value",weight:0}]}},computed:{prizeRes:function(){var t=this;return this.prizesImage.filter((function(e){return e.id===t.prizeId}))[0]||{}}},methods:{onCanvasRotateStart:function(t){var e=this;if(this.canvasVerify){var i=!0;this.DoServiceVerify(i,2e3).then((function(i){i?(console.log("验证通过, 开始旋转"),t(),e.canvasVerify=!1):alert("未通过验证")}))}else console.log("onCanvasRotateStart")},onImageRotateStart:function(){console.log("onImageRotateStart")},onRotateEnd:function(t){alert(t.value)},onChangePrize:function(t){this.prizeId=t},DoServiceVerify:function(t,e){return new Promise((function(i){setTimeout((function(){i(t)}),e)}))}}}),C=w,z=(i("eeb0"),Object(v["a"])(C,a,r,!1,null,"498206b3",null)),S=z.exports,x=(i("f5df1"),i("5a8b"),i("d7da")),R=i("ce5b"),P=i.n(R);i("bf40");n["default"].use(P.a),n["default"].use(x["a"]),n["default"].config.productionTip=!1,new n["default"]({vuetify:new P.a,render:function(t){return t(S)}}).$mount("#app")},d4d5:function(t,e,i){"use strict";i("e76c")},e76c:function(t,e,i){},eeb0:function(t,e,i){"use strict";i("3a4f")}});
//# sourceMappingURL=app.5a2dcd50.js.map